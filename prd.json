{
  "title": "맹구런 v1",
  "context": "v1 기능 완료. 게임 루프 패턴 리팩터링 완료 - 순수 함수 기반 로직, 단일 RAF 루프, useEffect deps 문제 해결.",
  "items": [
    {
      "id": "setup",
      "title": "프로젝트 초기 설정",
      "category": "setup",
      "description": "electron-vite 프로젝트 구조 생성 및 기본 설정",
      "steps": [
        "electron-vite 프로젝트 구조 생성 (src/main, src/preload, src/renderer, src/shared)",
        "공유 타입 정의 (src/shared/types.ts): SaveData, SnackState, MaengguState",
        "기본 Electron 창 설정 (transparent, frame:false, alwaysOnTop, hasShadow:false)"
      ],
      "status": "done",
      "passes": true
    },
    {
      "id": "window-core",
      "title": "오버레이 창 기본 설정",
      "category": "functional",
      "description": "투명 오버레이 창 + 멀티모니터 지원",
      "steps": [
        "BrowserWindow 옵션 정의 (transparent, frame:false, alwaysOnTop, hasShadow:false, resizable:false)",
        "전체 디스플레이 합산 영역 계산 로직 추가",
        "오버레이 창 크기/위치에 합산 영역 적용",
        "setIgnoreMouseEvents(true, { forward: true }) 기본 적용"
      ],
      "status": "done",
      "passes": true
    },
    {
      "id": "window-mouse",
      "title": "클릭 통과 시스템",
      "category": "functional",
      "description": "맹구 영역만 클릭 가능, 나머지는 통과",
      "steps": [
        "main: mouse:collider IPC 핸들러 등록",
        "renderer: 맹구 콜라이더 영역 계산 + mousemove 판정",
        "in/out 변화 시 setIgnoreMouseEvents 토글"
      ],
      "status": "done",
      "passes": true
    },
    {
      "id": "save-system",
      "title": "저장/로드 시스템",
      "category": "functional",
      "description": "JSON 저장, debounce, 오류 처리",
      "steps": [
        "save.json 경로 및 SaveData 타입 정의",
        "저장 파일 읽기/쓰기 구현",
        "500ms debounce 저장",
        "로드 실패 시 오류 대화창 + 앱 종료"
      ],
      "status": "done",
      "passes": true
    },
    {
      "id": "snack-state",
      "title": "간식 상태 관리",
      "category": "functional",
      "description": "main process에서 간식 상태 관리 + IPC",
      "steps": [
        "SnackStateManager 구현 (add, spend, broadcast)",
        "snack:add, snack:spend, snack:update IPC",
        "preload API 노출"
      ],
      "status": "done",
      "passes": true
    },
    {
      "id": "maenggu-render",
      "title": "맹구 렌더링",
      "category": "functional",
      "description": "스프라이트 로딩 및 DOM 렌더링",
      "steps": [
        "스프라이트 로딩 헬퍼 (idle/walk/eat/happy)",
        "Maenggu 컴포넌트 생성",
        "image-rendering: pixelated 적용"
      ],
      "status": "done",
      "passes": true
    },
    {
      "id": "animation-system",
      "title": "애니메이션 시스템",
      "category": "functional",
      "description": "상태 머신 + 프레임 전환",
      "steps": [
        "상태 머신 (idle/walk/eat/happy 전이)",
        "프레임 전환 타이머",
        "one-shot 애니메이션 완료 콜백 (eat, happy)"
      ],
      "status": "done",
      "passes": true
    },
    {
      "id": "movement-system",
      "title": "이동 시스템",
      "category": "functional",
      "description": "랜덤 이동 + idle 타이머",
      "steps": [
        "3-8초 랜덤 idle 타이머",
        "랜덤 목적지 생성",
        "벡터 계산 + RAF 이동",
        "경계 처리 + 목표 도달 판정"
      ],
      "status": "done",
      "passes": true
    },
    {
      "id": "interaction-click",
      "title": "클릭 상호작용",
      "category": "functional",
      "description": "클릭 시 간식 획득 + 플로팅 텍스트",
      "steps": [
        "클릭 시 이동 중지 + eat 애니메이션",
        "snack:add IPC 호출",
        "플로팅 텍스트 생성 + 애니메이션"
      ],
      "status": "done",
      "passes": true
    },
    {
      "id": "interaction-feed",
      "title": "먹이주기 상호작용",
      "category": "functional",
      "description": "우클릭 먹이주기",
      "steps": [
        "우클릭 시 snack:spend 호출",
        "성공 시 eat → happy 애니메이션",
        "실패 시 no-op"
      ],
      "status": "done",
      "passes": true
    },
    {
      "id": "ui-snack",
      "title": "간식 UI",
      "category": "usability",
      "description": "간식 카운터 표시",
      "steps": [
        "좌상단 고정 위치",
        "아이콘 + 숫자 렌더링",
        "pointer-events: none"
      ],
      "status": "done",
      "passes": true
    },
    {
      "id": "tray-menu",
      "title": "트레이 메뉴",
      "category": "usability",
      "description": "시스템 트레이 메뉴",
      "steps": [
        "트레이 아이콘 생성",
        "Stats 메뉴 (통계 대화창)",
        "Quit 메뉴"
      ],
      "status": "done",
      "passes": true
    },
    {
      "id": "refactor-game-loop",
      "title": "게임 루프 패턴 리팩터링",
      "category": "refactor",
      "description": "useEffect deps 문제 해결, 순수 함수 기반 게임 로직으로 전환. 6개 훅 → 3개 훅, App.tsx 41% 감소, 테스트 62개.",
      "steps": [
        "game/types.ts - 통합 상태 타입 (MaengguGameState, GameEvent)",
        "game/constants.ts - 게임 상수 정리",
        "game/vector.ts, target.ts - 기존 유틸 이동",
        "game/sprite-loader.ts, state-machine.ts - 이동",
        "game/create-initial-state.ts - 초기 상태",
        "game/update-animation.ts - 순수 애니메이션 로직",
        "game/update-movement.ts - 순수 이동 로직",
        "game/update.ts - 메인 업데이트 함수",
        "hooks/useMaenggu.ts - 단일 게임 루프 훅 (deps: [])",
        "App.tsx 단순화",
        "기존 훅 삭제 (useAnimation, useMovement, useIdleTimer, useMaengguState)",
        "테스트 재작성 (순수 함수 단위 테스트)"
      ],
      "status": "done",
      "passes": true
    }
  ]
}
