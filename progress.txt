=== Ralph Loop Progress ===

## 2025-01-18 - save-schema

**PRD**: save-schema (저장 스키마/경로)

**Completed**:
- SaveData, SaveDataStats 타입 정의
- MaengguState, Position 타입 정의
- IPC_CHANNELS 상수 정의
- DEFAULT_SAVE_DATA 기본값 정의
- 게임 상수 정의 (SAVE_DEBOUNCE_MS, IDLE_TIME_RANGE, MOVE_SPEED_RANGE 등)

**Files**:
- src/shared/types.ts (new)
- src/shared/constants.ts (new)
- electron/main.ts (unused import 제거)

**Decisions**:
- 기존 vite-plugin-electron 구조 유지 (electron-vite로 마이그레이션 안함)
- readonly 타입 사용으로 불변성 보장
- IPC 채널명을 상수로 중앙 관리

**Blockers**:
- oxlint 실행 불가 (Node ESM 호환성 문제) - 수정됨 (pnpm reinstall)

## 2025-01-18 - window-core

**PRD**: window-core (오버레이 창 기본 설정)

**Completed**:
- BrowserWindow 옵션 정의 (transparent, frame:false, alwaysOnTop, hasShadow:false, resizable:false)
- calculateCombinedDisplayBounds() - 모든 디스플레이 합산 영역 계산
- 오버레이 창 크기/위치에 합산 영역 적용
- setIgnoreMouseEvents(true, { forward: true }) 기본 적용
- setAlwaysOnTop('screen-saver') - macOS 최상위 레벨
- setContentProtection(true) - 스크린샷/녹화 보호
- contextIsolation: true, nodeIntegration: false - 보안 설정

**Files**:
- electron/main.ts (수정)

**Decisions**:
- screen.getAllDisplays() 사용하여 멀티모니터 bounding box 계산
- skipTaskbar: true, focusable: false로 시스템 UI 최소화
- DIP 좌표계 사용 (Retina 스케일링 자동 처리)

## 2025-01-18 - window-mouse + preload-api (partial)

**PRD**: window-mouse (클릭 통과 + 콜라이더 IPC)

**Completed**:
- main: mouse:collider IPC 핸들러 등록
- main: inCollider=true면 setIgnoreMouseEvents(false) 적용
- main: inCollider=false면 setIgnoreMouseEvents(true, { forward: true }) 적용
- preload: typed MaengguApi with mouse.setCollider exposed via contextBridge
- electron-env.d.ts: Window.maenggu 타입 선언

**Files**:
- electron/main.ts (ipcMain handler 추가)
- electron/preload.ts (MaengguApi 정의, contextBridge 노출)
- electron/electron-env.d.ts (Window 타입 보강)
- src/main.tsx (dead ipcRenderer code 제거)
- package.json (lint script 수정: --init → .)

**Decisions**:
- ipcRenderer 직접 노출 대신 typed API 노출 (보안/유지보수)
- MaengguApi 타입을 preload에서 export하여 type-safe window 접근

**Remaining (next iteration)**:
- renderer: 맹구 콜라이더 영역 계산 로직
- renderer: mousemove로 in/out 판정
- renderer: in/out 변화 시 IPC 송신